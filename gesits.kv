#:import MapView kivy_garden.mapview.MapView
#:import MapSource kivy_garden.mapview

<On_active_button@Button_Item>
    icon_color: app.theme_cls.text_color
    text_color: app.theme_cls.text_color
    button_bg_color: 23/255,28/255,35/255,1  
    mode: "color_on_active"
    badge_disabled: True

# <Progress>:
#     title: "Modal popup"
#     size_hint: (None, None)
#     size:(300,300)

<MyAKLineChart@AKLineChart>
    size_hint_y: None
    height: dp(180)
    x_values: [0, 10, 25, 50]
    y_values: [0, 5, 15, 35]
    circles_color: app.theme_cls.primary_color
    lines_color: app.theme_cls.primary_color
    label_size: dp(12)
    bg_color: 23/255,28/255,35/255,1  

#<MyWindow@AKFloatingWindow>
#    size_hint: None, None
#    size: dp(550), dp(350)
#    orientation: "vertical"

<RoundCard@MDCard>
    md_bg_color:23/255,28/255,35/255,1  
    spacing:"1dp"
    padding:"5dp"
    size_hint:1,0.2
    border_radius:50
    radius:[5]

<RoundCard_data@MDCard>
    orientation: "horizontal"
    spacing:"30dp"
    padding:"30dp"
    size_hint:0.7,1
    size: "300dp", "120dp"
    md_bg_color: 255/255,255/255,255/255,1
    border_radius:50
    radius:[5]

<CardLayout@BoxLayout>
    padding:"25dp"
    canvas:
        Color:
            rgba:(23/255,28/255,35/255,1  )
            #rgba:(14/255,11/255,30/255,1)
        RoundedRectangle:
            size: self.size
            pos: self.pos

<Label_roboto@Label>
    font_name:"Roboto"
    markup: True

<MyLayout>

    BoxLayout:
        orientation:'vertical'
        size:root.height,root.width

        canvas:
            Rectangle:
                source: 'bg.png'
                size: self.height, self.width
        #MDToolbar:
        #    title: "GESITS"
        #    elevation:10
        #    right_action_items: [["dots-vertical", lambda x: app.callback()]]
        #    height: 20
        #    #padding: "25dp"
        #    md_bg_color: 5/255,2/255,21/255,1
        #    #anchor_left:True
            
            
        MDBoxLayout:
            md_bg_color: 11/255,14/255,13/255,1 
            GridLayout:
                cols:2
                size_hint: 1, 1
                spacing:"25dp"
                padding:"25dp"
                canvas.before:
                    Rectangle:
                        source:"../GESITS-DASHBOARD/bg.png"
                        size: self.size
                        pos: self.pos
                GridLayout:
                    rows:3
                    size_hint:0.3,1
                    spacing:"25dp"
                    #canvas:
                    #    Color:
                    #        rgba:(5/255,2/255,21/255,1)
                    #    RoundedRectangle:
                    #        size: self.size
                    #        pos: self.pos
                    

                    ScreenManager:
                        id:menubar_left
                        size_hint_y:1
                        Screen:
                            id: menubar_leftTop1
                            name: "menubar_leftTop1"
                            BoxLayout:
                                orientation: "vertical"
                                spacing:'25dp'
                                CardLayout:
                                    orientation: "horizontal"
                                    size_hint_y: 0.4
                                    MDIconButton: 
                                        icon: "road-variant"
                                        user_font_size: "50sp"
                                        theme_text_color: "Custom"
                                        text_color: app.theme_cls.primary_color
                                        pos_hint:{"center_x": .1, "center_y": .5}
                                    Label_roboto:
                                        id: DummyDistance
                                        text: ""
                                        font_size: "24sp"
                                        pos_hint: {"center_x": .5, "center_y": .5}

                                CardLayout:
                                    orientation: "horizontal"
                                    size_hint_y: 0.4
                                    #MDIconButton: 
                                    #    icon: "clock-time-three-outline"
                                    #    user_font_size: "50sp"
                                    #    theme_text_color: "Custom"
                                    #    text_color: app.theme_cls.primary_color
                                    #    pos_hint:{"center_x": .1, "center_y": .5}
                                    Label_roboto:
                                        id: DummyTimeEst
                                        text: ""
                                        font_size: "24sp"
                                        pos_hint: {"center_x": .5, "center_y": .5}
                        Screen:
                            id: menubar_leftTop2
                            name:'menubar_leftTop2'
                            BoxLayout:
                                orientation: "vertical"
                                spacing:'25dp'
                                CardLayout:
                                    orientation: "horizontal"
                                    size_hint_y: 0.4
                                    MDIconButton: 
                                        icon: "motorbike"
                                        user_font_size: "50sp"
                                        theme_text_color: "Custom"
                                        text_color: app.theme_cls.primary_color
                                        pos_hint:{"center_x": .1, "center_y": .5}
                                    Label_roboto:
                                        id: mode_speed
                                        text: "ECO"
                                        font_size: "24sp"
                                        pos_hint: {"center_x": .5, "center_y": .5}

                                CardLayout:
                                    orientation: "horizontal"
                                    size_hint_y: 0.4

                                    spacing:5
                                    MDIconButton: 
                                        icon: "thermometer-lines"
                                        user_font_size: "50sp"
                                        theme_text_color: "Custom"
                                        text_color: app.theme_cls.primary_color
                                        pos_hint:{"left": .1, "center_y": .5}
                                    Label_roboto:
                                        id: suhu
                                        text: "37 Â°C"
                                        font_size: "24sp"
                                        pos_hint: {"center_x": .5, "center_y": .5}
                        

                    ScreenManager:
                        id:screendget_mini
                        size_hint_y: 1
                        Screen:
                            id:s_mini1
                            name:'s_mini1'
                            CardLayout:
                                orientation: 'vertical'
                                size_hint_y: 1
                                spacing:"10dp"
                                canvas:
                                    Color:
                                        rgba:(5/255,2/255,21/255,1)
                                BoxLayout:
                                    orientation: 'vertical'
                                    size_hint_y: .1
                                    canvas:
                                        Color:
                                            rgba:(1,1,1,1)
                                    Label_roboto:
                                        id: recommendation_label
                                        text:"REKOMENDASI"
                                        #theme_text_color: "Custom"
                                        #text_color: app.theme_cls.primary_color
                                        halign: "center"
                                        font_size: "24sp"
                                        pos_hint: {"center_x": 0.5}
                                        #text_size: self.size
                                        #size_hint:1,0.1
                                    
                                Label_roboto:
                                    id: recommendation
                                    text:""
                                    halign: "left"
                                    text_size: self.size
                                    size_hint:1,0.8
                                    font_siz: "12sp"
                        Screen:
                            id:s_mini2
                            name:'s_mini2'
                            CardLayout:   
                                size_hint:1,1
                                padding:"15dp"
                                MyAKLineChart:
                                    id: chart2
                                    size_hint_y:1
                                    labels: True
                                    anim: True
                                    Label: 
                                        text:""
                            
                            #on_select: root.set_text(args)
                        #Label:
                        #    id: name_label
                        #    text: "sisa SOC (akan diganti origin)"
                        #    size_hint:0.8,0.1
                        #    color: (1.1,1,1)
                        #    font_size: 12
                        #    pos_hint: {"center_x": .5, "center_y": .5}
                        #BoxLayout:
                        #    orientation: "horizontal"
                        #    size_hint:0.8,0.2
                        #    pos_hint: {"center_x": .5, "center_y": .5}

                        #    TextInput:
                        #        id: name_input
                        #        #on_parent:self.focus = True
                        #        textinput: ""
                        #        multiline: False
                        #        size_hint: 0.7,1
                        #    Button: 
                        #        background_color: 1.1,1,1
                        #        size_hint:0.2,1
                        #        padding:0.5,0.5
                        #        on_press:root.press()
                        

                    BoxLayout:
                        orientation: "horizontal"
                        size_hint_y:0.5
                        
                            
                            #Button:
                            #    size_hint:.3,.5
                            #    text: 'test'
                            #    on_release: qr.data = "Kivy Rocks!"
                        QRCodeWidget:
                            id: qr
                            data: 'Hello World'
                            size_hint:0.8,1
                        Label_roboto: 
                            text: 'Motor ID: \n J1234DS'
                        
                                                    

                GridLayout:
                    rows: 2
                    size_hint: 1, 1
                    spacing:"25dp"
                    #canvas:
                    #    Color:
                    #        rgba: (5/255,2/255,21/255,1)
                    #    Rectangle:
#
                    #        size: self.size
                    #        pos: self.pos        
                    BoxLayout:
                        size_hint: 1, 1
                        #padding:"15dp"
                        spacing:"25dp"
                        orientation: "vertical"
                        #canvas:
                        #    Color:
                        #        rgba:(5/255,2/255,21/255,1)
                        #    RoundedRectangle:
                        #        size: self.size
                        #        pos: self.pos

                        #CEFBrowser:
                        #    url:"file:///home/raizen/neiro/GMAPS/map.html"
                            #size_hint:
                        ScreenManager:
                            id:screendget
                            Screen:
                                id:test1
                                name: "screen1"
                                BoxLayout:
                                    size_hint:1,1
                                    orientation: "horizontal"
                                    canvas:
                                        Color:
                                            rgba:(23/255,28/255,35/255,1  )
                                        RoundedRectangle:
                                            size: self.size
                                            pos: self.pos
                                    BoxLayout:
                                        size_hint: 0.3, 1
                                        orientation: "vertical"
                                        spacing:"25dp"
                                        padding:"25dp"
                                        MDIconButton: 
                                            icon: "arrow-left-bold"
                                            user_font_size: "50sp"
                                            theme_text_color: "Custom"
                                            text_color: app.theme_cls.primary_color
                                            pos_hint:{"left": .5, "center_y": .5}
                                        MDIconButton: 
                                            icon: "bluetooth"
                                            user_font_size: "50sp"
                                            theme_text_color: "Custom"
                                            text_color: app.theme_cls.primary_color
                                            pos_hint:{"left": .5, "center_y": .5}
                                        MDIconButton: 
                                            icon: "cast-connected"
                                            user_font_size: "50sp"
                                            theme_text_color: "Custom"
                                            text_color: app.theme_cls.primary_color
                                            pos_hint:{"left": .5, "center_y": .5}
                                    BoxLayout:
                                        size: 0.4,1
                                        padding: "25dp"
                                        SpeedMeter:
                                            size_hint:1,1
                                            id: rpm
                                            max: 100
                                            tick: 300
                                            start_angle: -90
                                            end_angle: 135
                                            subtick: 3
                                            label: 'km/h'
                                            value: 
                                            cadran_color: '#171C23'
                                            shadow_color: '#92DAF1'
                                            shadow_width: 12
                                            #needle_color: '#ff0000'
                                            sectors: [0, '#0B0E0D']
                                            sector_width: 12 
                                    BoxLayout:
                                        size_hint: 0.3, 1
                                        #spacing:"25dp"
                                        orientation: "vertical"
                                        spacing:"25dp"
                                        padding:"25dp"
                                        MDIconButton: 
                                            icon: "arrow-right-bold"
                                            user_font_size: "50sp"
                                            theme_text_color: "Custom"
                                            text_color: app.theme_cls.primary_color
                                            pos_hint:{"left": .5, "center_y": .5}
                                        MDIconButton: 
                                            icon: "oil"
                                            user_font_size: "50sp"
                                            theme_text_color: "Custom"
                                            text_color: app.theme_cls.primary_color
                                            pos_hint:{"left": .5, "center_y": .5}
                                        Label_roboto:
                                            id: time
                                            font_size:24
                                            text: '[b]00[/b]:00'

                                        #AKCircularProgress:
                                        #    id: progress_percent
                                        #    pos_hint: {"center_x": .5, "center_y": .5}
                                        #    size_hint: .5,.3
                                        #    #size: dp(100), dp(100)
                                        #    percent_type: "percent"
                                        #    start_deg: 180
                                        #    end_deg: 540

                                        #MDBoxLayout:
                                        #    spacing: dp(5)
                                        #    size_hint:1,.2
                                        #    MDBoxLayout:
#
                                        #    Button:
                                        #        text: "0"
                                        #        on_release: progress_percent.current_percent = 0
#
                                        #    Button:
                                        #        text: "45"
                                        #        on_release: progress_percent.current_percent = 45
#
                                        #    Button:
                                        #        text: "100"
                                        #        on_release: progress_percent.current_percent = 100

                            Screen:
                                id:test2
                                name: "screen2"
            
                                MapView:
                                    id:mapview
                                    zoom:15
                                    lat:-7.2575
                                    lon:112.7521
                                    #map_source: 'osm-hot'
                                    map_source: MapSource.MapSource(cache_key='cartodb-darkmatter', url='https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', attribution='')
                                    marker:
                                        #lat:-7.2575
                                        #lon:112.7521
                                    #center_on:
                                    #    lat:-7.2575
                                    #    lon:112.7521
                                    #add_marker:
                                        #Button:
                                        #    on_release:
                                        #        print("hey")

                            
                    
                                    
                            
                            Screen:
                                id:test3
                                name: "screen3"
                                BoxLayout:
                                    size_hint:1,1
                                    orientation: "horizontal"
                                    canvas:
                                        Color:
                                            rgba:(23/255,28/255,35/255,1  )
                                        RoundedRectangle:
                                            size: self.size
                                            pos: self.pos
                                    ScrollView:
                                        MDList:
                                            id: container
                                            theme_text_color: 'Custom'
                                            text_color: 1,1,1,1
                                            #BaseListItem:
                                            #    theme_text_color: 'Primary'
                                            



                        BoxLayout:
                            orientation: "horizontal"
                            size_hint: 1,.15
                            spacing:"30dp"
                            #padding:"5dp"
                            pos_hint: {"center_x": .5, "center_y": .5}
                            #canvas:
                            #    Color:
                            #        rgba:(5/255,2/255,21/255,1)
                            #    RoundedRectangle:
                            #        size: self.size
                            #        pos: self.pos
                            NavBar:
                                size_hint: 0.4,1
                                pos_hint: {"right":1}
                                spacing:"10dp"
                                padding:"10dp"
                                elevation: 10
                                #md_bg_color: 5/255,2/255,21/255,1
                                radius: [10]
                                MDGridLayout:
                                    cols: 3
                                    size_hint: .9,1
                                    spacing: 5
                                    pos_hint: {"center_x": .5, "center_y": .5}
                                    On_active_button:
                                        id: nav_icon1
                                        icon: "google-maps"
                                        text: "Maps"
                                        ripple_scale: 0
                                        font_size: "30sp"
                                        on_press: root.move_maps()
                                    On_active_button:
                                        id: nav_icon2
                                        icon: "speedometer"
                                        text: "Speed"
                                        ripple_scale: 0
                                        font_size: "30sp"
                                        on_release: root.move_speed()
                                        on_release: root.move_s_mini1()
                                        on_release: root.move_menubar_left1()
                                    On_active_button:
                                        id: nav_icon3
                                        icon: "math-integral"
                                        text: "History"
                                        ripple_scale: 0
                                        font_size: "30sp"
                                        on_release: root.move_graph()
                            #AKBottomNavigation2:
                            #    #size_hint: 1,1
                            #    bg_color: app.theme_cls.bg_darkest
#
                            #    On_active_button:
                            #        ripple_scale: 0
                            #        text: "Alert"
                            #        icon: "bell-outline"
#
                            #    On_active_button:
                            #        font_size:"30sp"
                            #        text: "Bank"
                            #        icon: "bank-outline"
#
                            #    On_active_button:
                            #        text: "Download"
                            #        icon: "arrow-down-bold-outline"
                            Label_roboto:
                                text:"tujuan :"
                                size_hint:0.1,1
                                font_size:"15sp"
                            MDTextField:
                                id: tujuan
                                hint_text: "input alamat"
                                mode: "rectangle" 
                                pos_hint: {"left":1}   
                                size_hint: .4,1
                                multiline: False
                                write_tab: False
                            MDFillRoundFlatButton:
                                id: button_estimasi
                                pos_hint: {"center_x": .5, "center_y": .5}
                                text: "estimasi"
                                #color: 1,1,1,1
                                size_hint:0.2,0.7
                                on_press: root.estimasi()
                                on_release: root.move_maps()
                                on_release: root.center_maps()
                                on_release: root.move_s_mini2()
                                on_release: root.move_menubar_left2()
                                #on_release:root.estimasi()
                                #icon_right:xxxxxxxxxxxxx "card-search-outline"
                               #normal_color: app.theme_cls.accent_color
                            
                        #SpeedMeter:
                        #    size_hint:0.8,1
                        #    id: rpm
                        #    max: 100
                        #    tick: 200
                        #    start_angle: -90
                        #    end_angle: 135
                        #    subtick: 3
                        #    label: 'km/h'
                        #    value: 50
                        #    cadran_color: '#0E0B1E'
                        #    shadow_color: '#92DAF1'
                        #    #needle_color: '#ff0000'
                        #    sectors: [0, '#050215']
                        #    sector_width: 7
#
                        #Label:
                        #    text: 'MODE ECO'
                        #    size_hint: 0.2,1
#
                    BoxLayout:
                        size_hint: 1, 0.25
                        padding:"25dp"
                        spacing: 15
                        orientation:"horizontal"
                        canvas:
                            Color:
                                rgba:(23/255,28/255,35/255,1  )
                            RoundedRectangle:
                                size: self.size
                                pos: self.pos
                                
                        BoxLayout:
                            size_hint: 0.45, 1
                            #padding:"25dp"
                            spacing: 10
                            MDIconButton: 
                                icon: "battery-medium"
                                user_font_size: "50sp"

                                theme_text_color: "Custom"
                                text_color: app.theme_cls.primary_color
                                pos_hint:{"left": .5, "center_y": .5}
                            
                            BoxLayout:
                                size_hint: 1,1
                                orientation:"horizontal"
                                spacing:5
                                Label:
                                    text:"Battery\nHealth :"
                                    font_style: "Body2"
                                    font_name:"Roboto"
                                #font_size:"30sp"
                                
                                Label:
                                    id: SOC_value
                                    text:""
                                    #font_style: "Body2"
                                    font_name:"Roboto"
                                    font_size:"45sp"
                                    
                        BoxLayout:
                            size_hint: .1,1
                        BoxLayout:
                            size_hint: 0.45, 1
                            spacing:10
                            #padding:10
                            MDIconButton: 
                                icon: "speedometer"
                                user_font_size: "50sp"
                                theme_text_color: "Custom"
                                text_color: app.theme_cls.primary_color
                                pos_hint:{"left": .5, "center_y": .5}
                                
                            BoxLayout:
                                size_hint: 1,1
                                orientation:"horizontal"
                                spacing:5
                                #Label:
                                #    text:"Speed :"
                                #    font_style: "Body2"
                                #    font_name:"Roboto"

                                Label:
                                    id:speed_value
                                    text:""
                                    font_name:"Roboto"
                                    font_size:"45sp"    
        